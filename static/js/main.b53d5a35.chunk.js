(this["webpackJsonpreact-social-app"]=this["webpackJsonpreact-social-app"]||[]).push([[0],{33:function(e,s,t){},52:function(e,s,t){},53:function(e,s,t){},60:function(e,s,t){},61:function(e,s,t){},62:function(e,s,t){},63:function(e,s,t){},65:function(e,s,t){},66:function(e,s,t){},67:function(e,s,t){"use strict";t.r(s);var a=t(1),n=t.n(a),o=t(27),c=t.n(o),l=(t(33),t(2)),r=t(6),i=t(3),d=t(4),u=t.n(d),m=(t(52),t(53),t(0)),j=function(e){return Object(m.jsx)("nav",{className:window.location.href.endsWith("/")?"Nav Nav-sticky":"Nav",children:Object(m.jsxs)("ul",{className:"Nav-list",children:[Object(m.jsx)("li",{className:"Nav-listItem",children:Object(m.jsxs)(r.b,{className:"Nav-listItem-link",to:"/",onClick:e.searchWindowCloser,children:[Object(m.jsx)("i",{className:"fas fa-home Nav-listItem-linkIcon"}),"Home"]})}),!e.userToken&&Object(m.jsx)("li",{className:"Nav-listItem",children:Object(m.jsxs)(r.b,{className:"Nav-listItem-link",to:"/signup",children:[Object(m.jsx)("i",{className:"fas fa-user-plus Nav-listItem-linkIcon"}),"Sign up"]})}),!e.userToken&&Object(m.jsx)("li",{className:"Nav-listItem",children:Object(m.jsxs)(r.b,{className:"Nav-listItem-link",to:"/login",children:[Object(m.jsx)("i",{className:"fas fa-sign-in-alt Nav-listItem-linkIcon"}),"Log in"]})}),e.userToken&&Object(m.jsx)("li",{className:"Nav-listItem",children:Object(m.jsxs)(r.b,{className:"Nav-listItem-link",to:"/followed",onClick:e.searchWindowCloser,children:[Object(m.jsx)("i",{className:"fas fa-user-friends Nav-listItem-linkIcon"}),"Followed"]})}),e.userToken&&Object(m.jsx)("li",{className:"Nav-listItem",children:Object(m.jsxs)(r.b,{className:"Nav-listItem-link",to:"/",onClick:e.logUserDataOut,children:[Object(m.jsx)("i",{className:"fas fa-sign-out-alt Nav-listItem-linkIcon"}),"Log out"]})})]})})},p=(t(60),function(e){var s=Object(a.useState)(""),t=Object(l.a)(s,2),n=t[0],o=t[1],c=Object(a.useState)(""),d=Object(l.a)(c,2),j=d[0],p=d[1],h=Object(a.useState)(""),b=Object(l.a)(h,2),f=b[0],O=b[1],g=Object(a.useState)(""),x=Object(l.a)(g,2),N=x[0],I=x[1],v=Object(a.useState)(!1),k=Object(l.a)(v,2),w=k[0],S=k[1];return w?Object(m.jsx)(i.a,{to:"/"}):Object(m.jsxs)("div",{className:e.loginPopup?"Login Login-popup":"Login",children:[Object(m.jsxs)("h3",{className:"Login-header",children:["Log in",Object(m.jsx)("i",{className:"fas fa-sign-in-alt Login-headerIcon"})]}),Object(m.jsxs)("form",{className:"Login-form",onSubmit:function(s){s.preventDefault();var t={username:n,password:j,ttl:3600};u.a.post("https://akademia108.pl/api/social-app/user/login",JSON.stringify(t),e.headerConfig).then((function(s){localStorage.setItem("name",s.data.username),localStorage.setItem("jwt_token",s.data.jwt_token),e.setUserToken(s.data.jwt_token),e.setLoginPopup(!1),console.log("log in response: ",s)})).catch((function(e){console.error(e)})),S(!0),e.setMessageTrigger(!0),e.setMessage("Logged in")},children:[Object(m.jsx)("label",{className:"Login-form-label",htmlFor:"Name",children:"Name:"}),Object(m.jsx)("input",{id:"Name",type:"text",placeholder:"Username",autoComplete:"new-password",onChange:function(e){return o(e.target.value)},className:f?"Login-form-textInput Warning":"Login-form-textInput"}),Object(m.jsx)("label",{className:"Login-form-label",htmlFor:"Password",children:"Password:"}),Object(m.jsx)("input",{id:"Password",type:"password",placeholder:"Password",onChange:function(e){return p(e.target.value)},className:N?"Login-form-textInput Warning":"Login-form-textInput"}),Object(m.jsx)("input",{type:"submit",value:"Log in",onClick:function(e){var s=new RegExp("^(?=.{4,})"),t=new RegExp("^(?=.*[0-9])(?=.{4,})");s.test(n)?O(""):(e.preventDefault(),O("There is no user with that name, please sign up or check the username again")),t.test(j)?I(""):(e.preventDefault(),I("Invalid password, check it again"))},className:"Login-form-submitInput"}),Object(m.jsxs)("ul",{className:"Login-form-warningList",children:[Object(m.jsx)("li",{className:"Login-form-warningItem",children:f||N?null:"Don't have an account yet? Create it now and enjoy..."}),Object(m.jsx)("li",{className:"Login-form-warningItem",children:f}),Object(m.jsx)("li",{className:"Login-form-warningItem",children:N})]}),Object(m.jsx)(r.b,{className:"Login-form-redirectionLink",to:"/signup",onClick:function(){return e.setLoginPopup(!1)},children:"Sign up"})]}),Object(m.jsx)("div",{className:"Closer",children:Object(m.jsx)(r.b,{className:"Closer-link",to:"/",onClick:function(){return e.setLoginPopup(!1)},children:Object(m.jsx)("i",{className:"fas fa-times Closer-linkIcon"})})})]})}),h=(t(61),function(e){var s=Object(a.useState)(""),t=Object(l.a)(s,2),n=t[0],o=t[1],c=Object(a.useState)(""),d=Object(l.a)(c,2),j=d[0],p=d[1],h=Object(a.useState)(""),b=Object(l.a)(h,2),f=b[0],O=b[1],g=Object(a.useState)(""),x=Object(l.a)(g,2),N=x[0],I=x[1],v=Object(a.useState)(""),k=Object(l.a)(v,2),w=k[0],S=k[1],P=Object(a.useState)(""),C=Object(l.a)(P,2),D=C[0],y=C[1],B=Object(a.useState)(""),L=Object(l.a)(B,2),U=L[0],F=L[1],T=Object(a.useState)(!1),R=Object(l.a)(T,2),A=R[0],E=R[1];return A?Object(m.jsx)(i.a,{to:"/login"}):Object(m.jsxs)("div",{className:"Signup",children:[Object(m.jsxs)("h3",{className:"Signup-header",children:["Sign up",Object(m.jsx)("i",{className:"fas fa-user-plus Signup-headerIcon"})]}),Object(m.jsxs)("form",{className:"Signup-form",onSubmit:function(s){s.preventDefault();var t={username:n,email:j,password:f};u.a.post("https://akademia108.pl/api/social-app/user/signup",JSON.stringify(t),e.headerConfig).then((function(e){localStorage.setItem("name",e.data.user.username),console.log("sign up response: ",e)})).catch((function(e){console.error(e)})),E(!0),e.setMessageTrigger(!0),e.setMessage("Signed up successully")},children:[Object(m.jsx)("label",{className:"Signup-form-label",htmlFor:"Name",children:"Name:"}),Object(m.jsx)("input",{id:"Name",type:"text",placeholder:"Username",onChange:function(e){o(e.target.value)},className:w?"Signup-form-textInput Warning":"Signup-form-textInput"}),Object(m.jsx)("label",{className:"Signup-form-label",htmlFor:"Email",children:"Email:"}),Object(m.jsx)("input",{id:"Email",type:"email",placeholder:"User e-mail",onChange:function(e){p(e.target.value)},className:w?"Signup-form-textInput Warning":"Signup-form-textInput"}),Object(m.jsx)("label",{className:"Signup-form-label",htmlFor:"Password",children:"Password:"}),Object(m.jsx)("input",{id:"Password",type:"password",placeholder:"Password",onChange:function(e){O(e.target.value)},className:w?"Signup-form-textInput Warning":"Signup-form-textInput"}),Object(m.jsx)("label",{className:"Signup-form-label",htmlFor:"Confirm",children:"Confirm:"}),Object(m.jsx)("input",{id:"Confirm",type:"password",placeholder:"Confirm password",onChange:function(e){I(e.target.value)},className:w?"Signup-form-textInput Warning":"Signup-form-textInput"}),Object(m.jsx)("input",{type:"submit",value:"Sign up",onClick:function(e){var s=new RegExp("^(?=.{4,})"),t=new RegExp("^(?=.{2,})(?=.*[@])"),a=new RegExp("^(?=.*[a-z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{6,})");!s.test(n)||/\s/.test(n)?(e.preventDefault(),S("Name field cannot be empty, cannot include white spaces and should have min. 4 chars")):S(""),!t.test(j)||/\s/.test(j)?(e.preventDefault(),y("Email address cannot be empty, cannot include white spaces - should be like: name@domain.com")):y(""),a.test(f)&&f===N?F(""):(e.preventDefault(),F("Password field cannot be empty, should have min. 6 chars, at least 1 digit and at least 1 of special chars: ! @ # $ % ^ & *"))},className:"Signup-form-submitInput"}),Object(m.jsxs)("ul",{className:"Signup-form-warningList",children:[Object(m.jsx)("li",{className:"Signup-form-warningItem",children:w||D||U?null:"Already registered? Log in now and enjoy..."}),Object(m.jsx)("li",{className:"Signup-form-warningItem",children:w}),Object(m.jsx)("li",{className:"Signup-form-warningItem",children:D}),Object(m.jsx)("li",{className:"Signup-form-warningItem",children:U})]}),Object(m.jsx)(r.b,{className:"Signup-form-redirectionLink",to:"/login",children:"Log in"})]}),Object(m.jsx)("div",{className:"Closer",children:Object(m.jsx)(r.b,{className:"Closer-link",to:"/",children:Object(m.jsx)("i",{className:"fas fa-times Closer-linkIcon"})})})]})}),b=(t(62),function(e){return Object(m.jsxs)("div",{className:"AllFollowed",children:[Object(m.jsxs)("h3",{className:"AllFollowed-header",children:["Followed",Object(m.jsx)("i",{className:"fas fa-user-friends AllFollowed-headerIcon"})]}),Object(m.jsx)("ul",{className:"AllFollowed-list",children:0===e.allFollowed.length?Object(m.jsx)("p",{className:"AllFollowed-text",children:"Seems like you don't follow anyone..."}):e.allFollowed.map((function(s){return Object(m.jsxs)("li",{className:"AllFollowed-listItem",children:[Object(m.jsx)("img",{src:s.avatar_url,alt:"user_avatar",className:"AllFollowed-listItem-avatar"}),Object(m.jsxs)("div",{className:"AllFollowed-listItem-data",children:[Object(m.jsx)("p",{className:"AllFollowed-listItem-data-name",children:s.username}),Object(m.jsx)("p",{className:"AllFollowed-listItem-data-email",children:s.email})]}),Object(m.jsx)("div",{className:"FollowIcon",onClick:function(){e.unfollowUser(s.id)},tabIndex:"0",children:Object(m.jsx)("i",{className:"fas fa-minus AllFollowed-listItem-unfollowIcon"})})]},s.id)}))}),Object(m.jsx)("div",{className:"Closer",children:Object(m.jsx)(r.b,{className:"Closer-link",to:"/",onClick:e.closePopup,children:Object(m.jsx)("i",{className:"fas fa-times Closer-linkIcon"})})})]})}),f=(t(63),t(13)),O=t.n(f),g=function(e){return Object(m.jsxs)("aside",{className:"Dashboard",children:[Object(m.jsxs)("div",{className:"Dashboard-profile",children:[Object(m.jsxs)("h3",{className:"Dashboard-header",children:["Your profile",Object(m.jsx)("i",{className:"far fa-id-card Dashboard-headerIcon"})]}),Object(m.jsxs)("div",{className:"Dashboard-profile-data",children:[Object(m.jsx)("img",{src:e.profileAvatar,alt:"profile_avatar",className:"Dashboard-profile-data-avatar"}),Object(m.jsx)("p",{className:"Dashboard-profile-data-name",children:e.profileName}),Object(m.jsx)("p",{className:"Dashboard-profile-data-email",children:e.profileEmail})]}),Object(m.jsxs)("div",{className:"Dashboard-inputBox",children:[Object(m.jsx)("input",{type:"text",placeholder:"write some post",value:e.postContent,onChange:function(s){return e.setPostContent(s.target.value)},className:"Dashboard-inputBox-textInput"}),Object(m.jsx)("button",{className:"Dashboard-inputBox-button",onClick:e.addPost,children:Object(m.jsx)("i",{className:"fas fa-pen-alt Dashboard-inputBox-buttonIcon"})}),e.searchedPostTrigger?Object(m.jsx)("div",{className:"Dashboard-searchedPostResult",children:Object(m.jsx)("ul",{className:"Dashboard-searchedPostResult-list",children:0===e.searchedPostResult.length?Object(m.jsx)("div",{className:"Dashboard-searchedPostResult-infoBox",children:Object(m.jsx)("p",{className:"Dashboard-searchedPostResult-info",children:e.searchedPostInfo})}):e.searchedPostResult.map((function(s){return Object(m.jsxs)("li",{className:"Dashboard-searchedPostResult-listItem",children:[Object(m.jsxs)("div",{className:"Dashboard-searchedPostResult-listItem-author",children:[Object(m.jsx)("img",{src:s.user.avatar_url,alt:"user_avatar",className:"Dashboard-searchedPostResult-listItem-author-avatar"}),Object(m.jsxs)("div",{className:"Dashboard-searchedPostResult-listItem-author-data",children:[Object(m.jsx)("p",{className:"Dashboard-searchedPostResult-listItem-author-data-name",children:s.user.username}),Object(m.jsx)("span",{className:"Dashboard-searchedPostResult-listItem-author-data-timeAgo",children:O()(s.created_at).fromNow()})]}),Object(m.jsxs)("div",{className:"Dashboard-searchedPostResult-listItem-likeBox",children:[Object(m.jsx)("span",{className:"Dashboard-searchedPostResult-listItem-likeBox-likeAmount",children:s.likes.length}),Object(m.jsx)("i",{className:s.likes.filter((function(e){return e.username===localStorage.getItem("name")})).length>0?"far fa-heart Dashboard-searchedPostResult-listItem-likeBoxIcon Post-liked":"far fa-heart Dashboard-searchedPostResult-listItem-likeBoxIcon",onClick:function(t){t.target.classList.contains("Post-liked")?(t.target.classList.remove("Post-liked"),e.postDislike(s.id)):(t.target.classList.add("Post-liked"),e.postLike(s.id))},tabIndex:"0"})]}),e.userToken&&s.user.username!==localStorage.getItem("name")?Object(m.jsx)("div",{className:"FollowIcon",onClick:function(){e.unfollowUser(s.user.id)},tabIndex:"0",children:Object(m.jsx)("i",{className:"fas fa-minus Dashboard-searchedPostResult-listItem-unfollowIcon"})}):null]}),Object(m.jsx)("p",{className:"Dashboard-searchedPostResult-listItem-postContent",children:s.content})]},s.id)}))})}):null,e.searchedPostTrigger?Object(m.jsx)("div",{className:"Dashboard-searchedPostResult-closer",onClick:function(){e.searchedPostCloser()},children:Object(m.jsx)("i",{className:"fas fa-times Dashboard-searchedPostResult-closerIcon"})}):null]}),Object(m.jsxs)("div",{className:"Dashboard-inputBox",children:[Object(m.jsx)("input",{type:"date",value:e.postBrowserByDate,onChange:function(s){return e.setPostBrowserByDate(s.target.value)},className:"Dashboard-inputBox-textInput"}),Object(m.jsx)("button",{className:"Dashboard-inputBox-button",onClick:e.searchedPostResultHandler,children:Object(m.jsx)("i",{className:"fas fa-search Dashboard-inputBox-buttonIcon"})})]})]}),Object(m.jsxs)("div",{className:"Dashboard-users",children:[Object(m.jsxs)("h3",{className:"Dashboard-header",children:["You may follow",Object(m.jsx)("i",{className:"fas fa-users Dashboard-headerIcon"})]}),Object(m.jsx)("ul",{className:"Dashboard-users-recommendedUsersList",children:e.recommendedUsers.map((function(s){return Object(m.jsxs)("li",{className:"Dashboard-users-recommendedUsersItem",children:[Object(m.jsx)("img",{src:s.avatar_url,alt:"user_avatar",className:"Dashboard-users-recommendedUsersItem-avatar"}),Object(m.jsxs)("div",{className:"Dashboard-users-recommendedUsersItem-data",children:[Object(m.jsx)("p",{className:"Dashboard-users-recommendedUsersItem-data-name",children:s.username}),Object(m.jsx)("p",{className:"Dashboard-users-recommendedUsersItem-data-email",children:s.email})]}),Object(m.jsx)("div",{className:"FollowIcon",onClick:function(){e.followUser(s.id)},tabIndex:"0",children:Object(m.jsx)("i",{className:"fas fa-plus Dashboard-users-recommendedUsersItem-followIcon"})})]},s.id)}))}),Object(m.jsxs)("h3",{className:"Dashboard-header",children:["Social Club",Object(m.jsx)("i",{className:"fas fa-icons Dashboard-headerIcon"})]}),Object(m.jsxs)("div",{className:"Dashboard-inputBox",children:[Object(m.jsx)("input",{type:"text",placeholder:"search user by name",value:e.friendBrowserByName,onChange:function(s){return e.setFriendBrowserByName(s.target.value)},className:"Dashboard-inputBox-textInput"}),Object(m.jsx)("button",{className:"Dashboard-inputBox-button",onClick:e.searchFriendByName,children:Object(m.jsx)("i",{className:"fas fa-user-alt Dashboard-inputBox-buttonIcon"})}),e.searchedUserTrigger?Object(m.jsxs)("div",{className:"Dashboard-searchedUserResult",children:[e.searchedUserInfo?null:Object(m.jsxs)("div",{className:"Dashboard-searchedUserResult-user",children:[Object(m.jsx)("img",{src:e.searchedAvatar,alt:"user_avatar",className:"Dashboard-searchedUserResult-user-avatar"}),Object(m.jsxs)("div",{className:"Dashboard-searchedUserResult-user-data",children:[Object(m.jsx)("p",{className:"Dashboard-searchedUserResult-user-data-name",children:e.searchedName}),Object(m.jsx)("p",{className:"Dashboard-searchedUserResult-user-data-email",children:e.searchedEmail})]}),Object(m.jsx)("div",{className:"FollowIcon",onClick:function(){e.followUser(e.searchedUserId)},tabIndex:"0",children:Object(m.jsx)("i",{className:"fas fa-plus Dashboard-searchedUserResult-user-followIcon"})})]}),e.searchedUserInfo?Object(m.jsx)("div",{className:"Dashboard-searchedUserResult-infoBox",children:Object(m.jsx)("p",{className:"Dashboard-searchedUserResult-info",children:e.searchedUserInfo})}):null]}):null,e.searchedUserTrigger?Object(m.jsx)("div",{className:"Dashboard-searchedUserResult-closer",onClick:function(){e.setSearchedUserTrigger(!1)},children:Object(m.jsx)("i",{className:"fas fa-times Dashboard-searchedUserResult-closerIcon"})}):null]}),Object(m.jsxs)("div",{className:"Dashboard-inputBox",children:[Object(m.jsx)("input",{type:"email",placeholder:"search user by email",value:e.friendBrowserByEmail,onChange:function(s){return e.setFriendBrowserByEmail(s.target.value)},className:"Dashboard-inputBox-textInput"}),Object(m.jsx)("button",{className:"Dashboard-inputBox-button",onClick:e.searchFriendByEmail,children:Object(m.jsx)("i",{className:"fas fa-at Dashboard-inputBox-buttonIcon"})})]})]})]})},x=(t(65),t(66),function(e){return Object(m.jsxs)("div",{className:"ConfirmationPopup",children:[Object(m.jsx)("p",{className:"ConfimationPopup-text",children:"Do you really want to delete this post?"}),Object(m.jsxs)("div",{className:"ConfirmationPopup-buttonBox",children:[Object(m.jsx)("button",{className:"ConfirmationPopup-button Confirm",onClick:function(){return e.deletePost(e.postId)},children:Object(m.jsx)("i",{className:"fas fa-check ConfimationPopup-button-confirmIcon"})}),Object(m.jsx)("button",{className:"ConfirmationPopup-button Deny",onClick:function(){return e.setConfirmationPopup(!1)},children:Object(m.jsx)("i",{className:"fas fa-times ConfimationPopup-button-denyIcon"})})]})]})}),N=function(e){return Object(m.jsxs)("main",{className:"Wall",children:[Object(m.jsxs)("ul",{className:"Wall-postList",children:[e.latestPosts.map((function(s){return Object(m.jsxs)("li",{className:"Wall-postItem",children:[Object(m.jsxs)("div",{className:"Wall-postItem-author",children:[Object(m.jsx)("img",{src:s.user.avatar_url,alt:"user_avatar",className:"Wall-postItem-author-avatar"}),Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{className:"Wall-postItem-author-name",children:s.user.username}),Object(m.jsx)("span",{className:"Wall-postItem-author-email",children:s.user.email})]}),e.userToken&&s.user.username!==localStorage.getItem("name")?Object(m.jsx)("div",{className:"FollowIcon",onClick:function(){e.unfollowUser(s.user.id)},tabIndex:"0",children:Object(m.jsx)("i",{className:"fas fa-minus Wall-postItem-unfollowIcon"})}):null]}),Object(m.jsx)("p",{className:"Wall-postItem-content",children:s.content}),Object(m.jsxs)("div",{className:"Wall-postItem-postInfo",children:[Object(m.jsx)("span",{className:"Wall-postItem-postInfo-timeAgo",children:O()(s.created_at).fromNow()}),Object(m.jsxs)("div",{className:"Wall-postItem-postInfo-likeBox",children:[Object(m.jsx)("span",{className:"Wall-postItem-postInfo-likeBox-amount",children:s.likes.length}),Object(m.jsx)("i",{className:s.likes.filter((function(e){return e.username===localStorage.getItem("name")})).length>0?"far fa-heart Wall-postItem-postInfo-likeBox-icon Post-liked":"far fa-heart Wall-postItem-postInfo-likeBox-icon",onClick:function(t){if(!e.userToken)return null;t.target.classList.contains("Post-liked")?(t.target.classList.remove("Post-liked"),e.postDislike(s.id)):(t.target.classList.add("Post-liked"),e.postLike(s.id))},tabIndex:"0"})]})]}),s.user.username===localStorage.getItem("name")&&Object(m.jsx)("div",{className:"Closer",onClick:function(){e.showConfirmationPopup(s.id)},tabIndex:"0",children:Object(m.jsx)("i",{className:"fas fa-times Closer-icon"})})]},s.id)})),e.confirmationPopup?Object(m.jsx)("aside",{className:"App-popup",children:Object(m.jsx)(x,{setConfirmationPopup:e.setConfirmationPopup,postId:e.postId,deletePost:e.deletePost})}):null]}),Object(m.jsx)("div",{className:e.isVisible?"Preloader-container Show-preloader":"Preloader-container",children:Object(m.jsx)("div",{className:"Preloader"})})]})},I=Object(i.g)((function(e){var s=e.history;return Object(a.useEffect)((function(){var e=s.listen((function(){window.scrollTo(0,0)}));return function(){e()}}),[s]),null})),v=function(){var e=Object(a.useState)(localStorage.getItem("jwt_token")),s=Object(l.a)(e,2),t=s[0],n=s[1],o=Object(a.useState)(!1),c=Object(l.a)(o,2),d=c[0],f=c[1],O=Object(a.useState)([]),x=Object(l.a)(O,2),v=x[0],k=x[1],w=Object(a.useState)(""),S=Object(l.a)(w,2),P=S[0],C=S[1],D=Object(a.useState)(""),y=Object(l.a)(D,2),B=y[0],L=y[1],U=Object(a.useState)(""),F=Object(l.a)(U,2),T=F[0],R=F[1],A=Object(a.useState)(""),E=Object(l.a)(A,2),W=E[0],_=E[1],J=Object(a.useState)([]),M=Object(l.a)(J,2),H=M[0],z=M[1],V=Object(a.useState)([]),Y=Object(l.a)(V,2),$=Y[0],q=Y[1],G=Object(a.useState)(""),K=Object(l.a)(G,2),Q=K[0],X=K[1],Z=Object(a.useState)(""),ee=Object(l.a)(Z,2),se=ee[0],te=ee[1],ae=Object(a.useState)(""),ne=Object(l.a)(ae,2),oe=ne[0],ce=ne[1],le=Object(a.useState)(""),re=Object(l.a)(le,2),ie=re[0],de=re[1],ue=Object(a.useState)(""),me=Object(l.a)(ue,2),je=me[0],pe=me[1],he=Object(a.useState)(""),be=Object(l.a)(he,2),fe=be[0],Oe=be[1],ge=Object(a.useState)([]),xe=Object(l.a)(ge,2),Ne=xe[0],Ie=xe[1],ve=Object(a.useState)(""),ke=Object(l.a)(ve,2),we=ke[0],Se=ke[1],Pe=Object(a.useState)(""),Ce=Object(l.a)(Pe,2),De=Ce[0],ye=Ce[1],Be=Object(a.useState)(""),Le=Object(l.a)(Be,2),Ue=Le[0],Fe=Le[1],Te=Object(a.useState)(""),Re=Object(l.a)(Te,2),Ae=Re[0],Ee=Re[1],We=Object(a.useState)(""),_e=Object(l.a)(We,2),Je=_e[0],Me=_e[1],He=Object(a.useState)(!1),ze=Object(l.a)(He,2),Ve=ze[0],Ye=ze[1],$e=Object(a.useState)(!1),qe=Object(l.a)($e,2),Ge=qe[0],Ke=qe[1],Qe=Object(a.useState)(!1),Xe=Object(l.a)(Qe,2),Ze=Xe[0],es=Xe[1],ss=Object(a.useState)(!1),ts=Object(l.a)(ss,2),as=ts[0],ns=ts[1],os=Object(a.useState)(!1),cs=Object(l.a)(os,2),ls=cs[0],rs=cs[1],is=Object(a.useState)(!1),ds=Object(l.a)(is,2),us=ds[0],ms=ds[1],js=Object(a.useState)(!1),ps=Object(l.a)(js,2),hs=ps[0],bs=ps[1],fs=Object(a.useState)(!1),Os=Object(l.a)(fs,2),gs=Os[0],xs=Os[1],Ns=function(e){var s=Object(a.useState)(null),t=Object(l.a)(s,2),n=t[0],o=t[1],c=Object(a.useState)(!1),r=Object(l.a)(c,2),i=r[0],d=r[1];return Object(a.useEffect)((function(){var s=new IntersectionObserver((function(e){var s=Object(l.a)(e,1)[0];d(s.isIntersecting)}),e);return n&&s.observe(n),function(){n&&s.unobserve(n)}}),[n,e]),[o,i]}({threshold:1}),Is=Object(l.a)(Ns,2),vs=Is[0],ks=Is[1],ws={headers:{"Content-Type":"application/json",Accept:"application/json"}},Ss={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("jwt_token")}};Object(a.useEffect)((function(){var e=setTimeout((function(){!t&&window.location.href.endsWith("/")&&f(!0)}),5e3);return function(){return clearTimeout(e)}}),[t]),Object(a.useEffect)((function(){u.a.post("https://akademia108.pl/api/social-app/post/latest",JSON.stringify(),ws).then((function(e){k(e.data)})).catch((function(e){console.error(e)}))}),[Ge,Ze,t]),Object(a.useEffect)((function(){t&&(u.a.post("https://akademia108.pl/api/social-app/user/profile",JSON.stringify(),Ss).then((function(e){R(e.data.username),_(e.data.email),L(e.data.avatar_url)})).catch((function(e){console.error(e)})),u.a.post("https://akademia108.pl/api/social-app/follows/recommendations",JSON.stringify(),Ss).then((function(e){z(e.data)})).catch((function(e){console.error(e)})),u.a.post("https://akademia108.pl/api/social-app/follows/allfollows",JSON.stringify(),Ss).then((function(e){q(e.data)})).catch((function(e){console.error(e)})))}),[as,t]),Object(a.useEffect)((function(){if(""===oe)return null;u.a.post("https://akademia108.pl/api/social-app/post/newer-then",JSON.stringify({date:oe}),Ss).then((function(e){Ie(e.data),0===e.data.length&&Fe("There are no newer posts for the date you entered, check date again and keep looking"),console.log("check post response: ",e)})).catch((function(e){console.error(e)}))}),[us,Ze,$,Ue,hs]),Object(a.useEffect)((function(){ks&&t&&Cs(v[v.length-1].created_at)}),[ks]),Object(a.useEffect)((function(){var e=setTimeout((function(){gs&&xs(!1)}),3e3);return function(){return clearTimeout(e)}}),[gs,P]);var Ps=function(){u.a.post("https://akademia108.pl/api/social-app/user/logout",JSON.stringify(),Ss).then((function(e){localStorage.removeItem("name"),localStorage.removeItem("jwt_token"),n(localStorage.getItem("jwt_token")),rs(!1),ms(!1),Ie([]),ce(""),xs(!0),C("Logged out"),console.log("log out response: ",e)})).catch((function(e){console.error(e)}))},Cs=function(e){u.a.post("https://akademia108.pl/api/social-app/post/older-then",JSON.stringify({date:e}),Ss).then((function(e){k(v.concat(e.data))})).catch((function(e){console.error(e)}))},Ds=function(e){u.a.post("https://akademia108.pl/api/social-app/post/like",JSON.stringify({post_id:e}),Ss).then((function(e){es(!Ze),xs(!0),C("Like has been added"),console.log("like response: ",e)})).catch((function(e){console.error(e)}))},ys=function(e){u.a.post("https://akademia108.pl/api/social-app/post/dislike",JSON.stringify({post_id:e}),Ss).then((function(e){es(!Ze),xs(!0),C("Like has been removed"),console.log("dislike response: ",e)})).catch((function(e){console.error(e)}))},Bs=function(e){u.a.post("https://akademia108.pl/api/social-app/follows/disfollow",JSON.stringify({leader_id:e}),Ss).then((function(e){ns(!as),xs(!0),C("Follow has been removed"),console.log("unfollow response: ",e)})).catch((function(e){console.error(e)}))},Ls=function(){rs(!1),ms(!1),Ie([]),ce("")};return Object(m.jsxs)("div",{className:"App-social",children:[Object(m.jsx)("header",{className:"App-header",children:Object(m.jsx)("h1",{className:"App-header-text",children:Object(m.jsxs)(r.b,{className:"App-header-link",to:"/",children:["Social Club",Object(m.jsx)("i",{className:"fas fa-icons App-header-linkIcon"})]})})}),Object(m.jsx)(I,{}),Object(m.jsxs)(i.d,{children:[Object(m.jsxs)(i.b,{exact:!0,path:"/",children:[Object(m.jsx)(j,{userToken:t,logUserDataOut:Ps,searchWindowCloser:Ls}),t?Object(m.jsx)(g,{profileAvatar:B,profileName:T,profileEmail:W,recommendedUsers:H,followUser:function(e){u.a.post("https://akademia108.pl/api/social-app/follows/follow",JSON.stringify({leader_id:e}),Ss).then((function(e){ns(!as),rs(!1),xs(!0),C("Follow has been added"),console.log("follow response: ",e)})).catch((function(e){console.error(e)}))},unfollowUser:Bs,addPost:function(){Ie([]),""===Ae?(ms(!0),Fe("Post field cannot be empty, type what's on your mind and share it with your friends")):u.a.post("https://akademia108.pl/api/social-app/post/add",JSON.stringify({content:Ae}),Ss).then((function(e){Ke(!0),ms(!1),xs(!0),C("Post has been added"),console.log("post add response: ",e)})).catch((function(e){console.error(e)})),Ke(!1),Ee("")},postContent:Ae,setPostContent:Ee,searchFriendByName:function(){""===Q?(rs(!0),ye("Name field cannot be empty, type exact name and find your friend")):(u.a.post("https://akademia108.pl/api/social-app/user/check-username",JSON.stringify({username:Q}),Ss).then((function(e){de(e.data.username),pe(e.data.email),Oe(e.data.avatar_url),ye(e.data.message),rs(!0),Se(e.data.id),console.log("check by name response: ",e)})).catch((function(e){console.error(e)})),X(""))},searchFriendByEmail:function(){""===se?(ye("Email field cannot be empty, type correct address and find your friend"),rs(!0)):(u.a.post("https://akademia108.pl/api/social-app/user/check-email",JSON.stringify({email:se}),Ss).then((function(e){de(e.data.username),pe(e.data.email),Oe(e.data.avatar_url),rs(!0),ye(e.data.message),Se(e.data.id),console.log("check by email response: ",e)})).catch((function(e){console.error(e)})),te(""))},friendBrowserByName:Q,setFriendBrowserByName:X,friendBrowserByEmail:se,setFriendBrowserByEmail:te,postBrowserByDate:oe,setPostBrowserByDate:ce,searchedUserInfo:De,searchedPostInfo:Ue,searchedAvatar:fe,searchedName:ie,searchedEmail:je,searchedUserTrigger:ls,setSearchedUserTrigger:rs,searchedPostTrigger:us,searchedPostResult:Ne,searchedUserId:we,userToken:t,postLike:Ds,postDislike:ys,searchedPostCloser:function(){ms(!1),Ie([]),ce("")},searchedPostResultHandler:function(){ms(!0),bs(!hs),""===oe&&Fe("Date field cannot be empty, enter date and find post that you looking for")}}):null,Object(m.jsx)(N,{latestPosts:v,postLike:Ds,postDislike:ys,deletePost:function(e){u.a.post("https://akademia108.pl/api/social-app/post/delete",JSON.stringify({post_id:e}),Ss).then((function(e){Ke(!0),xs(!0),C("Post has been removed"),console.log("post delete response: ",e)})).catch((function(e){console.error(e)})),Ke(!1),Ye(!1)},confirmationPopup:Ve,setConfirmationPopup:Ye,showConfirmationPopup:function(e){Ye(!0),Me(e)},postId:Je,unfollowUser:Bs,isVisible:ks,getMorePosts:Cs,userToken:t})]}),Object(m.jsxs)(i.b,{path:"/login",children:[Object(m.jsx)(j,{userToken:t,logUserDataOut:Ps,searchWindowCloser:Ls}),Object(m.jsx)(p,{headerConfig:ws,setUserToken:n,loginPopup:d,setLoginPopup:f,setMessage:C,setMessageTrigger:xs})]}),Object(m.jsxs)(i.b,{path:"/signup",children:[Object(m.jsx)(j,{userToken:t,logUserDataOut:Ps,searchWindowCloser:Ls}),Object(m.jsx)(h,{headerConfig:ws,setMessage:C,setMessageTrigger:xs})]}),Object(m.jsxs)(i.b,{path:"/followed",children:[Object(m.jsx)(j,{userToken:t,logUserDataOut:Ps,searchWindowCloser:Ls}),Object(m.jsx)(b,{allFollowed:$,unfollowUser:Bs})]})]}),d?Object(m.jsx)("aside",{className:"App-popup",children:Object(m.jsx)(p,{headerConfig:ws,setUserToken:n,loginPopup:d,setLoginPopup:f,setMessage:C,setMessageTrigger:xs})}):null,gs?Object(m.jsx)("aside",{className:P.includes("removed")||P.includes("deleted")||P.includes("Logged out")?"App-message Slide-in App-message-red":"App-message Slide-in App-message-green",children:Object(m.jsx)("p",{className:"App-message-content",children:P})}):null,Object(m.jsx)("footer",{className:"App-footer",ref:vs,children:Object(m.jsxs)("p",{className:"App-footer-text",children:["Social Club",Object(m.jsx)("i",{className:"far fa-copyright App-footer-icon"}),"2021"]})})]})},k=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,68)).then((function(s){var t=s.getCLS,a=s.getFID,n=s.getFCP,o=s.getLCP,c=s.getTTFB;t(e),a(e),n(e),o(e),c(e)}))};c.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(r.a,{children:Object(m.jsx)(v,{})})}),document.getElementById("root")),k()}},[[67,1,2]]]);
//# sourceMappingURL=main.b53d5a35.chunk.js.map